//= require jquery-ui/datepicker

$(document).ready(function() {
  $('#banktransfer_instructions').click(function(event) {
    $('#instructions-modal').modal('show');
  });

  $('[name="payment[deposited_on]"]').datepicker({dateFormat: '<%= Spree.t(:js_format, :scope => "date_picker", :default => "yy/mm/dd") %>'});

  $('.add_bt_details').click(function() {
    $(this).hide();
    $('.bt_payment_form').show();
    $('.bt_payment_form').removeClass('hidden')
  });

  $('.bt_payment_form input[type="submit"]').click(function(event) {
    var empty_fields = $('.required_field').filter(function() { return !$(this).val().trim().length }), empty_fields_names = []
    if ($(empty_fields).length) {
      $(empty_fields).each(function() {
        empty_fields_names.push($(this).attr('field-name'));
      });

      alert(empty_fields_names.join(', ') + " can't be blank");
      event.preventDefault();
      return false;
    }
  });
});
